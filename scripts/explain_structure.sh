#!/bin/bash

echo "ğŸ“¦ MaQueAI Docker Project Structure"
echo "=================================="
echo ""

echo "ğŸ  Host directory structure:"
echo "/home/sunpeng/WorkSpace/MaQueAI/"
echo "â”œâ”€â”€ ğŸ“ docker_config/          # Docker configuration files"
echo "â”‚   â”œâ”€â”€ ğŸ“„ Dockerfile-MaQueAI  # Image build file"
echo "â”‚   â””â”€â”€ ğŸ“ .devcontainer/      # VS Code dev container configuration"
echo "â”œâ”€â”€ ğŸ“ data/                   # Data files (mapped to container /data)"
echo "â”‚   â””â”€â”€ (Place your data files here)"
echo "â”œâ”€â”€ ğŸ“ workspace/              # Workspace (mapped to container /workspace) [created at runtime]"
echo "â”‚   â””â”€â”€ ğŸ“ catkin_ws/          # ROS workspace"
echo "â”œâ”€â”€ ğŸ“ scripts/                # Utility scripts"
echo "â”‚   â”œâ”€â”€ ğŸ“„ build_docker.sh     # Build Docker image"
echo "â”‚   â”œâ”€â”€ ğŸ“„ run_docker.sh       # Run Docker container"
echo "â”‚   â”œâ”€â”€ ğŸ“„ run_docker_dev.sh   # Run development mode (mount workspace)"
echo "â”‚   â”œâ”€â”€ ğŸ“„ build_livo.sh       # Compile LIVO project"
echo "â”‚   â”œâ”€â”€ ğŸ“„ watch_docker_build.sh      # Monitor Docker build process"
echo "â”‚   â”œâ”€â”€ ğŸ“„ show_build_progress.sh     # Show build progress"
echo "â”‚   â”œâ”€â”€ ğŸ“„ setup_collaborative_workspace.sh  # Setup collaborative workspace"
echo "â”‚   â””â”€â”€ ğŸ“„ explain_structure.sh       # Project structure explanation (this script)"
echo "â”œâ”€â”€ ğŸ“„ README.md               # Project documentation"
echo "â””â”€â”€ ğŸ“„ .gitignore              # Git ignore configuration"
echo ""

echo "ğŸ³ Docker container internal structure:"
echo "ğŸ“ /opt/dependencies/          # Dependency library source code and compilation (pre-installed)"
echo "â”œâ”€â”€ ğŸ“ Sophus/                 # Sophus a621ff source code (fixed So2.cpp)"
echo "â””â”€â”€ ğŸ“ rpg_vikit/              # Vikit source code"
echo ""
echo "ğŸ“ /usr/local/                 # System library installation location"
echo "â”œâ”€â”€ ğŸ“ include/sophus/         # Sophus header files"
echo "â”œâ”€â”€ ğŸ“ include/vikit*/         # Vikit header files"
echo "â””â”€â”€ ğŸ“ lib/libSophus.so        # Sophus library files"
echo ""

echo "ğŸ“ /workspace/catkin_ws/       # Development workspace"
echo "â”œâ”€â”€ ğŸ“ src/"
echo "â”‚   â””â”€â”€ ğŸ“ LIVO/               # FAST-LIVO2 (renamed, cloned only)"
echo "â”œâ”€â”€ ğŸ“ build/                  # Compilation intermediate files (initially empty)"
echo "â””â”€â”€ ğŸ“ devel/                  # Compilation results (initially basic environment only)"
echo ""

echo "ğŸ”— Running mode comparison:"
echo "Mode 1 - Independent container mode (recommended for testing):"
echo "  Command: ./scripts/run_docker.sh"
echo "  Features: Use pre-built environment in container, code modified inside container"
echo "  Scope: Quick testing, demo, learning"
echo ""
echo "Mode 2 - Development mount mode (recommended for collaborative development):"
echo "  Command: ./scripts/run_docker_dev.sh"
echo "  Features: Mount host workspace, code modified synchronously"
echo "  Scope: Team collaborative development, IDE integration"
echo ""

echo "ğŸ’¡ Pre-installed environment:"
echo "âœ… Ubuntu 20.04 + ROS Noetic"
echo "âœ… PCL 1.10, Eigen 3.3.7, OpenCV 4.2"
echo "âœ… Sophus a621ff (fixed complex initialization issue)"
echo "âœ… Vikit (rpg_vikit)"
echo "âœ… LIVO source code (FAST-LIVO2 renamed, development ready)"
echo ""

echo "ğŸ› ï¸  Container utility commands:"
echo "check_versions.sh       - Check all library versions"
echo "check_projects.sh       - Check project status"
echo "check_dependencies.sh   - Check dependency details"
echo "build_livo.sh          - Compile LIVO project"
echo "show_structure.sh      - Show container structure"
echo ""

echo "ğŸš€ Development workflow:"
echo "1. Build image:    ./scripts/build_docker.sh"
echo "2. Start container:    ./scripts/run_docker.sh (or run_docker_dev.sh)"
echo "3. Check environment:    check_versions.sh && check_projects.sh"
echo "4. Compile project:    build_livo.sh"
echo "5. Run algorithm:    roslaunch LIVO mapping_avia.launch"
echo "6. Play data:    rosbag play /data/your_bag_file.bag"
echo ""

echo "ğŸ”§ Advanced features:"
echo "- Monitor build:     ./scripts/watch_docker_build.sh"
echo "- Build progress:    ./scripts/show_build_progress.sh"
echo "- Collaborative setup:    ./scripts/setup_collaborative_workspace.sh"
echo ""

echo "ğŸ’¡ Important notes:"
echo "- /workspace in container is synchronized with host workspace directory"
echo "- Data files are placed in host data directory, accessed through /data in container"
echo "- After deleting the container, workspace and data directory contents are retained on host"
echo "- Supports VS Code dev container integration (.devcontainer configuration)"
echo "- Necessary directory structure is automatically created on first run"
