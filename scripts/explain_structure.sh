#!/bin/bash

echo "ğŸ“¦ MaQueAI Docker Project Structure"
echo "=================================="
echo ""

echo "ğŸ  Host directory structure:"
echo "/home/sunpeng/WorkSpace/MaQueAI/"
echo "â”œâ”€â”€ ğŸ“ docker_config/          # Docker configuration file"  
echo "â”‚   â””â”€â”€ ğŸ“„ Dockerfile-MaQueAI  # image build file"
echo "â”œâ”€â”€ ğŸ“ data/                   # data files (mapped to container /data)"
echo "â”‚   â””â”€â”€ ğŸ“„ Bright_Screen_Wall.bag"
echo "â”œâ”€â”€ ğŸ“ workspace/              # workspace (mapped to container /workspace) [optional]"
echo "â”‚   â””â”€â”€ ğŸ“ catkin_ws/          # ROS workspace"
echo "â””â”€â”€ ğŸ“ scripts/                # useful scripts"
echo "    â”œâ”€â”€ ğŸ“„ build_docker.sh     # build Docker image"
echo "    â”œâ”€â”€ ğŸ“„ run_docker.sh       # run Docker container"
echo "    â”œâ”€â”€ ğŸ“„ run_docker_dev.sh   # run development mode (mount workspace)"
echo "    â””â”€â”€ ğŸ“„ explain_structure.sh"
echo ""

echo "ğŸ³ Docker container structure:"
echo "ğŸ“ /opt/dependencies/          # dependency library source code and compilation (pre-installed)"
echo "â”œâ”€â”€ ğŸ“ Sophus/                 # Sophus a621ff source code (fixed So2.cpp)"
echo "â””â”€â”€ ğŸ“ rpg_vikit/              # Vikit source code"
echo ""
echo "ğŸ“ /usr/local/                 # system library installation location"
echo "â”œâ”€â”€ ğŸ“ include/sophus/         # Sophus header files"
echo "â”œâ”€â”€ ğŸ“ include/vikit*/         # Vikit header files"  
echo "â””â”€â”€ ğŸ“ lib/libSophus.so        # Sophus library files"
echo ""

echo "ğŸ“ /workspace/catkin_ws/       # development workspace"
echo "â”œâ”€â”€ ğŸ“ src/"
echo "â”‚   â””â”€â”€ ğŸ“ LIVO/               # FAST-LIVO2 (renamed, only cloned)"
echo "â”œâ”€â”€ ğŸ“ build/                  # compilation temporary files (initial empty)"
echo "â””â”€â”€ ğŸ“ devel/                  # compilation results (initial only basic environment)"
echo ""

echo "ğŸ”— Running mode comparison:"
echo "Mode 1 - independent container mode (recommended for testing):"
echo "  command: ./scripts/run_docker.sh"
echo "  features: use pre-built environment in container, code modified in container"
echo "  scope: quick test, demo, learning"
echo ""
echo "Mode 2 - development mount mode (recommended for collaboration):"
echo "  command: ./scripts/run_docker_dev.sh"
echo "  features: mount host workspace, code modified synchronously"
echo "  scope: team collaboration development, IDE integration"
echo ""

echo "ğŸ’¡ pre-installed environment:"
echo "âœ… Ubuntu 20.04 + ROS Noetic"
echo "âœ… PCL 1.10, Eigen 3.3.7, OpenCV 4.2"
echo "âœ… Sophus a621ff (fixed complex initialization problem)"
echo "âœ… Vikit (rpg_vikit)"
echo "âœ… LIVO source code (FAST-LIVO2 renamed, development ready)"
echo ""

echo "ğŸ› ï¸  container useful commands:"
echo "check_versions.sh       - check all library versions"
echo "check_projects.sh       - check project status"
echo "check_dependencies.sh   - check dependency details"
echo "build_livo.sh          - compile LIVO project"
echo "show_structure.sh      - show container structure"
echo ""

echo "ğŸš€ development workflow:"
echo "1. build image:    ./scripts/build_docker.sh"
echo "2. start container:    ./scripts/run_docker.sh (or run_docker_dev.sh)"
echo "3. check environment:    check_versions.sh && check_projects.sh"
echo "4. compile project:    build_livo.sh"
echo "5. run algorithm:    roslaunch LIVO mapping_avia.launch"
echo "6. play data:    rosbag play /data/Bright_Screen_Wall.bag"
echo ""

echo "ğŸ’¡ Notes:"
echo "- /workspace in container is synchronized with host workspace directory"
echo "- Data files are placed in the host data directory, accessed through /data in the container"
echo "- After deleting the container, the contents of workspace and data directories will be retained on the host" 